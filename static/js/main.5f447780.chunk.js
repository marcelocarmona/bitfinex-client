(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(41)},27:function(e,t,n){},33:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),l=(n(27),n(3)),i=n(4),u=n(7),s=n(5),d=n(8),b=n(6),E=n(9),m="TICKER-UPDATE_MESSAGE";function p(e){return{type:m,payload:e}}n(33);var v=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.tickerConnection()}},{key:"render",value:function(){var e=this.props.ticker,t=e.VOLUME,n=e.LOW,a=e.HIGH,c=e.LAST_PRICE,o=e.DAILY_CHANGE,l=e.DAILY_CHANGE_PERC,i=e.pair;return r.a.createElement("div",{className:"ticker"},r.a.createElement("div",{className:"ticker__column"},r.a.createElement("div",null,i),r.a.createElement("div",null,"VOL ",t),r.a.createElement("div",null,"LOW ",n)),r.a.createElement("div",{className:"ticker__column"},r.a.createElement("div",null,c),r.a.createElement("div",null,o,"(",l,"%)"),r.a.createElement("div",null,"HIGH ",a)))}}]),t}(a.PureComponent),f=Object(b.b)(function(e){return{ticker:e.ticker}},function(e){return{tickerConnection:function(){e(function(e){var t=new WebSocket("wss://api.bitfinex.com/ws/2");t.addEventListener("message",function(t){var n=JSON.parse(t.data);if("subscribed"===n.event)e(p({pair:n.pair}));else if("info"===n.event);else{var a=n[1];if("hb"!==a){var r=Object(E.a)(a,10),c=r[0],o=r[1],l=r[2],i=r[3],u=r[4],s=r[5],d=r[6],b=r[7],m=r[8],v=r[9];e(p({BID:c,BID_SIZE:o,ASK:l,ASK_SIZE:i,DAILY_CHANGE:u,DAILY_CHANGE_PERC:s,LAST_PRICE:d,VOLUME:b,HIGH:m,LOW:v}))}}});var n=JSON.stringify({event:"subscribe",channel:"ticker",symbol:"tBTCUSD"});t.addEventListener("open",function(){return t.send(n)}),t.addEventListener("error",function(e){console.error("Socket encountered error: ",e.message,"Closing socket"),t.close()})})}}})(v),O="TRADE-UPDATE_MESSAGE",h="TRADE-ADD_MESSAGE";function k(e){return{type:O,payload:e}}function y(){return function(e,t){var n=new WebSocket("wss://api.bitfinex.com/ws/2");n.addEventListener("message",function(t){var n=JSON.parse(t.data);if("subscribed"===n.event)e(k({symbol:n.symbol,trades:[]}));else if("info"===n.event);else{var a=n[1];if("tu"===a){var r=n[2];e({type:h,payload:{symbol:"tBTCUSD",newTrade:r}})}else if("hb"!==a&&"te"!==a){e(k({symbol:"tBTCUSD",trades:a}))}}});var a=JSON.stringify({event:"subscribe",channel:"trades",symbol:"tBTCUSD"});n.addEventListener("open",function(){return n.send(a)}),n.addEventListener("error",function(e){console.error("Socket encountered error: ",e.message,"Closing socket"),n.close()})}}n(35);var j=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.tradesConnection()}},{key:"render",value:function(){var e=this.props.trades;return r.a.createElement("div",{className:"trade"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"TIME"),r.a.createElement("th",null,"AMOUNT"),r.a.createElement("th",null,"PRICE"))),r.a.createElement("tbody",null,e.tBTCUSD.map(function(e){var t=Object(E.a)(e,4),n=t[0],a=t[1],c=t[2],o=t[3];return r.a.createElement("tr",{key:n,className:c>0?"trade--bought":"trade--sold"},r.a.createElement("td",null,c>0?"\ud83d\udd3a":"\ud83d\udd3b"),r.a.createElement("td",null,new Date(a).toLocaleTimeString()),r.a.createElement("td",null,c),r.a.createElement("td",null,o))}))))}}]),t}(a.PureComponent),C=Object(b.b)(function(e){return{trades:e.trades}},function(e){return{tradesConnection:function(){e(y())}}})(j),S="BOOK-SNAPSHOT_MESSAGE",A="BOOK-UPDATE_MESSAGE",D="BOOK-UPDATE_CHANNEL";function g(e){return{type:D,channel:e}}var w=null;function _(e,t){return function(n,a){w?(w.close(),w=new WebSocket("wss://api.bitfinex.com/ws/2")):w=new WebSocket("wss://api.bitfinex.com/ws/2"),w.addEventListener("open",function(){var n=a().book.channel,r=n.symbol,c=n.freq,o=n.prec,l=JSON.stringify({event:"subscribe",channel:"book",symbol:r,freq:e||c,prec:t||o});w.send(l)});var r=null;w.addEventListener("message",function(e){var t=JSON.parse(e.data);if("subscribed"===t.event)r=t;else if("info"===t.event);else{var a=t[1];50===a.length?n(function(e){var t=e.channel,n=e.payload;return{type:S,channel:t,payload:n}}({channel:r,payload:t})):"hb"!==a&&n({type:A,payload:t})}}),w.addEventListener("error",function(e){console.error("Socket encountered error: ",e.message,"Closing socket"),w.close(),n(g({event:null,chanId:null}))})}}n(37);var I=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).changePrecision=function(e){e.preventDefault(),n.props.orderBookConnection(null,e.target.value)},n.changeFrequency=function(e){e.preventDefault(),n.props.orderBookConnection(e.target.value)},n.closeConnection=function(e){e.preventDefault(),n.props.orderBookCloseConnection()},n.openConnection=function(e){e.preventDefault(),n.props.orderBookConnection()},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.orderBookConnection("F1","P0")}},{key:"render",value:function(){var e=this.props,t=e.asks,n=e.bids,a=e.channel;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement("div",null,"Frequency ",a.freq,"\xa0",r.a.createElement("select",{onChange:this.changeFrequency},r.a.createElement("option",{value:"F1"},"F1"),r.a.createElement("option",{value:"F0"},"F0")),"\xa0 Precision Level ",a.prec,"\xa0",r.a.createElement("select",{onChange:this.changePrecision},r.a.createElement("option",{value:"P0"},"P0"),r.a.createElement("option",{value:"P1"},"P1"),r.a.createElement("option",{value:"P2"},"P2"),r.a.createElement("option",{value:"P3"},"P3")),"\xa0 \xa0",a.chanId?r.a.createElement("button",{onClick:this.closeConnection},"close book connection"):r.a.createElement("button",{onClick:this.openConnection},"open book connection")),r.a.createElement("div",{className:"book"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"COUNT"),r.a.createElement("th",null,"AMOUNT"),r.a.createElement("th",null,"PRICE"))),r.a.createElement("tbody",null,Object.keys(t).map(function(e){return r.a.createElement("tr",{key:e},r.a.createElement("td",null,t[e].count),r.a.createElement("td",null,t[e].amount),r.a.createElement("td",null,t[e].price))}))),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"PRICE"),r.a.createElement("th",null,"AMOUNT"),r.a.createElement("th",null,"COUNT"))),r.a.createElement("tbody",null,Object.keys(n).map(function(e){return r.a.createElement("tr",{key:e},r.a.createElement("td",null,n[e].price),r.a.createElement("td",null,n[e].amount),r.a.createElement("td",null,n[e].count))})))))}}]),t}(a.PureComponent),P=Object(b.b)(function(e){return{channel:e.book.channel,asks:e.book.asks,bids:e.book.bids}},function(e){return{orderBookConnection:function(t,n){e(_(t,n))},orderBookCloseConnection:function(){e(function(e){w&&(w.close(),e(g({event:null,chanId:null})))})}}})(I),T=n(10),L=n(1),N={pair:"BTCUSD",BID:0,BID_SIZE:0,ASK:0,ASK_SIZE:0,DAILY_CHANGE:0,DAILY_CHANGE_PERC:0,LAST_PRICE:0,VOLUME:0,HIGH:0,LOW:0};var B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(L.a)({},e,t.payload);default:return e}},U=n(2),H={channel:{event:null,channel:"book",chanId:null,symbol:"tBTCUSD",prec:"P0",freq:"F1",len:"25",pair:"BTCUSD"},asks:{},bids:{}};var M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:var n=t.payload[1];return n=n.reduce(function(e,t,n){var a=Object(E.a)(t,3),r=a[0],c=a[1],o=a[2];return n<25?Object(L.a)({},e,{asks:Object(L.a)({},e.asks,Object(U.a)({},r,{amount:o,count:c,price:r}))}):Object(L.a)({},e,{bids:Object(L.a)({},e.bids,Object(U.a)({},r,{amount:o,count:c,price:r}))})},H),Object(L.a)({},n,{channel:t.channel});case A:var a=Object(E.a)(t.payload[1],3),r=a[0],c=a[1],o=a[2];if(c>0){if(o>0)return Object(L.a)({},e,{bids:Object(L.a)({},e.bids,Object(U.a)({},r,{amount:o,count:c,price:r}))});if(o<0)return Object(L.a)({},e,{asks:Object(L.a)({},e.asks,Object(U.a)({},r,{amount:o,count:c,price:r}))})}else if(0===c){if(1===o){var l=Object(L.a)({},e.bids);return delete l[r],Object(L.a)({},e,{bids:l})}if(-1===o){var i=Object(L.a)({},e.asks);return delete i[r],Object(L.a)({},e,{asks:i})}}return Object(L.a)({},e);case D:return Object(L.a)({},e,{channel:Object(L.a)({},e.channel,t.channel)});default:return e}},G=n(21),R={tBTCUSD:[]};var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(L.a)({},e,Object(U.a)({},t.payload.symbol,t.payload.trades));case h:return Object(L.a)({},e,Object(U.a)({},t.payload.symbol,[t.payload.newTrade].concat(Object(G.a)(e[t.payload.symbol].slice(0,-1)))));default:return e}},W=n(20),J=(n(39),{ticker:B,book:M,trades:F}),K=Object(T.c)(J),q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||T.d,Y=Object(T.e)(K,q(Object(T.a)(W.a))),x=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(b.a,{store:Y},r.a.createElement("div",{className:"App"},r.a.createElement(f,null),r.a.createElement(C,null),r.a.createElement(P,null)))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,2,1]]]);
//# sourceMappingURL=main.5f447780.chunk.js.map